from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # allow frontend to connect

# Temporary storage (can replace with DB like SQLite/MySQL)
plants = []

@app.route("/plants", methods=["GET"])
def get_plants():
    return jsonify(plants)

@app.route("/plants", methods=["POST"])
def add_plant():
    data = request.json
    plant = {
        "name": data.get("name"),
        "category": data.get("category"),
        "date": data.get("date"),
        "location": data.get("location"),
        "water": data.get("water"),
        "sunlight": data.get("sunlight"),
        "notes": data.get("notes")
    }
    plants.append(plant)
    return jsonify({"message": "Plant added successfully!", "plant": plant}), 201

@app.route("/plants/<string:name>", methods=["DELETE"])
def delete_plant(name):
    global plants
    plants = [p for p in plants if p["name"].lower() != name.lower()]
    return jsonify({"message": f"Plant '{name}' deleted."})

if __name__ == "__main__":
    app.run(debug=True)
